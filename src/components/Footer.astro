---
import { Mail } from '@lucide/astro';
---
<!-- Footer Component -->
<footer id="footer" class="bg-neutral-800 text-white py-4 p-4 w-full rounded-xl mt-16 mb-12 flex-col transition-all duration-500 mx-auto gap space-y-4 px-4" style="max-width: 100%;">
  <div class="max-w-screen-xl mx-auto justify-between items-center space-y-6">
    <div style="font-family: 'Satoshi', sans-serif;" class="justify-start text-white text-lg">Interested in collaborating?<br/>Don't hesitate.</div>
    
    <!-- Desktop Layout: Mail icon on the left -->
    <a href="mailto:niko@tunjic.at" class="hidden md:flex flex-row space-x-4 items-center group transition-transform duration-300 cursor-pointer">
      <Mail class="w-[6rem] h-[6rem] text-white group-hover:text-neutral-200   transition-colors" />
      <div style="font-family: 'Satoshi', sans-serif;" class="text-white text-8xl font-medium group-hover:text-neutral-200 transition-colors">Get in touch!</div>
    </a>
    
    <!-- Mobile Layout: Mail icon above text, left aligned -->
    <a href="mailto:niko@tunjic.at" class="flex md:hidden flex-col items-start space-y-4 group transition-transform duration-300 cursor-pointer">
      <Mail class="w-[4rem] h-[4rem] text-white group-hover:text-neutral-200 transition-colors" />
      <div style="font-family: 'Satoshi', sans-serif;" class="text-white text-6xl font-medium group-hover:text-neutral-200 transition-colors">Get in touch!</div>
    </a>
    
    <p style="font-family: 'Satoshi', sans-serif;" class="text-sm">&copy; 2025 Niko Tunjic. All rights reserved.</p>
  </div>
</footer>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const section = document.getElementById("footer");

    function updateFooterWidth() {
      const isMobile = window.innerWidth < 768; // md breakpoint
      
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              // Mobile: weniger dramatische Veränderung, Desktop: wie vorher
              section.style.maxWidth = isMobile ? "95%" : "90%";
            } else {
              section.style.maxWidth = "100%";
            }
          });
        },
        { 
          threshold: isMobile ? 0.1 : 0.3, // Mobile: früher triggern
          rootMargin: isMobile ? '0px 0px -30px 0px' : '0px' // Mobile: etwas Offset
        }
      );

      // Cleanup previous observer if exists
      if (section.currentObserver) {
        section.currentObserver.disconnect();
      }
      
      section.currentObserver = observer;
      observer.observe(section);
    }

    // Initial setup
    updateFooterWidth();

    // Update on window resize
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(updateFooterWidth, 150);
    });
  });
</script>