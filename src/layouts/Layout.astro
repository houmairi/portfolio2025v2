---
import Footer from '../components/Footer.astro'
import Header from '../components/Header.astro'
import '../styles/global.css'
import { SEO } from 'astro-seo';

export interface Props {
  title?: string;
  description?: string;
  image?: string;
  canonical?: string;
  noindex?: boolean;
  type?: 'website' | 'article';
}

const {
  title = "Niko Tunjic - Software Engineer", 
  description = "Software Engineer with experience leading projects from start to finish, working both as a freelancer and in large companies, specializing in full-stack development and machine learning solutions.",
  image = "/images/og-image.jpg",
  canonical,
  noindex = false,
  type = 'website'
} = Astro.props;

const baseURL = Astro.site?.toString() || 'https://tunjic.at';
const canonicalURL = canonical || new URL(Astro.url.pathname, baseURL).toString();
const imageURL = new URL(image, baseURL).toString();

// Structured Data
const structuredData = {
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Niko Tunjic",
  "jobTitle": "Software Engineer",
  "url": baseURL,
  "sameAs": [
    "https://www.linkedin.com/in/niko-tunjic/",
    "https://github.com/houmairi",
  ],
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Vienna",
    "addressCountry": "Austria"
  },
  "email": "niko@tunjic.at",
  "knowsAbout": ["Software Engineering", "Full-Stack Development", "Machine Learning", "JavaScript", "Python", "React", "Node.js"],
  "alumniOf": {
    "@type": "CollegeOrUniversity",
    "name": "FH Technikum Wien"
  }
};
---

<html class="scroll-smooth" lang="en">
  <head>
    <meta charset="utf-8" />
    <SEO
      title={title}
      description={description}
      canonical={canonicalURL}
      noindex={noindex}
      openGraph={{
        basic: {
          title: title,
          type: type,
          image: imageURL,
          url: canonicalURL,
        },
        optional: {
          description: description,
          locale: "en_US",
          siteName: "Niko Tunjic Portfolio",
        },
      }}
      extend={{
        link: [
          { rel: "icon", type: "image/svg+xml", href: "/favicon.svg" },
          { rel: "sitemap", href: "/sitemap-index.xml" },
        ],
        meta: [
          { name: "viewport", content: "width=device-width, initial-scale=1.0" },
          { name: "author", content: "Niko Tunjic" },
          { name: "robots", content: noindex ? "noindex, nofollow" : "index, follow" },
          { name: "theme-color", content: "#171717" },
          // Nur bei Artikeln
          ...(type === 'article' ? [{ property: "article:author", content: "Niko Tunjic" }] : []),
        ],
      }}
    />
    
    <link href="https://api.fontshare.com/v2/css?f[]=satoshi@400,500,700&display=swap" rel="stylesheet">
    
    <script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
  </head>
  
  <body>
    <div class="w-full px-4 md:max-w-screen-xl md:mx-auto">
      <Header />
      <slot />
      <Footer />
    </div>
  </body>
</html>